

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Hypercall APIs &mdash; Project ACRN 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/acrn-custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Project ACRN 1.0.0 documentation" href="../index.html"/>
        <link rel="up" title="Project ACRN APIs" href="index.html"/>
        <link rel="next" title="Device Model APIs" href="devicemodel_api.html"/>
        <link rel="prev" title="Project ACRN APIs" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Project ACRN
          

          
            
            <img src="../_static/ACRNlogo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">Introducing Project ACRN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hypervisor_primer/index.html">Hypervisor Developer Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contribution Guidelines</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Project ACRN APIs</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Hypercall APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="devicemodel_api.html">Device Model APIs</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Project ACRN</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Project ACRN APIs</a> &raquo;</li>
        
      <li>Hypercall APIs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hypercall-apis">
<span id="id1"></span><h1>Hypercall APIs<a class="headerlink" href="#hypercall-apis" title="Permalink to this headline">¶</a></h1>
<p>This section contains APIs for the hypercall services.</p>
<dl class="group">
<dt>
<span class="target" id="group__acrn__hypercall"></span><em>group</em> <code class="descname">acrn_hypercall</code></dt>
<dd><p>Hypercall. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Defines</p>
<dl class="macro">
<dt id="c.ACRN_INTR_TYPE_ISA">
<span class="target" id="group__acrn__hypercall_1ga4bc0cc0456bfd0a736a9619a29a066dc"></span><code class="descname">ACRN_INTR_TYPE_ISA</code><a class="headerlink" href="#c.ACRN_INTR_TYPE_ISA" title="Permalink to this definition">¶</a></dt>
<dd><p>Interrupt type for <a class="reference internal" href="#structacrn__irqline"><span class="std std-ref">acrn_irqline</span></a>: inject interrupt to IOAPIC </p>
</dd></dl>

<dl class="macro">
<dt id="c.ACRN_INTR_TYPE_IOAPIC">
<span class="target" id="group__acrn__hypercall_1ga973c52a426bda13b719315751edeba2b"></span><code class="descname">ACRN_INTR_TYPE_IOAPIC</code><a class="headerlink" href="#c.ACRN_INTR_TYPE_IOAPIC" title="Permalink to this definition">¶</a></dt>
<dd><p>Interrupt type for <a class="reference internal" href="#structacrn__irqline"><span class="std std-ref">acrn_irqline</span></a>: inject interrupt to both PIC and IOAPIC </p>
</dd></dl>

<dl class="macro">
<dt id="c.GUEST_CFG_OFFSET">
<span class="target" id="group__acrn__hypercall_1ga4a6721b10d7813cd32c6d4493b15c6ae"></span><code class="descname">GUEST_CFG_OFFSET</code><a class="headerlink" href="#c.GUEST_CFG_OFFSET" title="Permalink to this definition">¶</a></dt>
<dd><p>The guest config pointer offset. </p>
<p>It’s designed to support passing DM config data pointer, based on it, hypervisor would parse then pass DM defined configuration to GUEST VCPU when booting guest VM. the address 0xd0000 here is designed by DM, as it arranged all memory layout below 1M, DM should make sure there is no overlap for the address 0xd0000 usage. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Functions</p>
<dl class="function">
<dt id="_CPPv221hcall_get_api_versionP2vm8uint64_t">
<span id="hcall_get_api_version__vmP.uint64_t"></span><span class="target" id="group__acrn__hypercall_1ga700411143c8bcd4cb9b14289962e514d"></span>int64_t <code class="descname">hcall_get_api_version</code><span class="sig-paren">(</span><em class="property">struct</em> vm *<em>vm</em>, uint64_t <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv221hcall_get_api_versionP2vm8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get hypervisor api version. </p>
<p>The function only return api version information when VM is VM0.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">VM</span></code>: Pointer to VM data structure </li>
<li><code class="docutils literal"><span class="pre">param</span></code>: guest physical memory address. The api version returned will be copied to this gpa</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv215hcall_create_vmP2vm8uint64_t">
<span id="hcall_create_vm__vmP.uint64_t"></span><span class="target" id="group__acrn__hypercall_1ga91c4de2e749a381433e105dd0eccbb13"></span>int64_t <code class="descname">hcall_create_vm</code><span class="sig-paren">(</span><em class="property">struct</em> vm *<em>vm</em>, uint64_t <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv215hcall_create_vmP2vm8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>create virtual machine </p>
<p>Create a virtual machine based on parameter, currently there is no limitation for calling times of this function, will add MAX_VM_NUM support later.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">VM</span></code>: Pointer to VM data structure </li>
<li><code class="docutils literal"><span class="pre">param</span></code>: guest physical memory address. This gpa points to struct <a class="reference internal" href="#structacrn__create__vm"><span class="std std-ref">acrn_create_vm</span></a></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv216hcall_destroy_vm8uint64_t">
<span id="hcall_destroy_vm__uint64_t"></span><span class="target" id="group__acrn__hypercall_1ga9315c7c2844d35f787b9fe5079465236"></span>int64_t <code class="descname">hcall_destroy_vm</code><span class="sig-paren">(</span>uint64_t <em>vmid</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv216hcall_destroy_vm8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>destroy virtual machine </p>
<p>Destroy a virtual machine, it will pause target VM then shutdown it. The function will return -1 if the target VM does not exist.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">vmid</span></code>: ID of the VM</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv215hcall_resume_vm8uint64_t">
<span id="hcall_resume_vm__uint64_t"></span><span class="target" id="group__acrn__hypercall_1gadb392d9252742e3884216e678348e200"></span>int64_t <code class="descname">hcall_resume_vm</code><span class="sig-paren">(</span>uint64_t <em>vmid</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv215hcall_resume_vm8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>resume virtual machine </p>
<p>Resume a virtual machine, it will schedule target VM’s vcpu to run. The function will return -1 if the target VM does not exist or the IOReq buffer page for the VM is not ready.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">vmid</span></code>: ID of the VM</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv214hcall_pause_vm8uint64_t">
<span id="hcall_pause_vm__uint64_t"></span><span class="target" id="group__acrn__hypercall_1ga590e32ed11fcf7082e4cc3a0eb15f2a5"></span>int64_t <code class="descname">hcall_pause_vm</code><span class="sig-paren">(</span>uint64_t <em>vmid</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv214hcall_pause_vm8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>pause virtual machine </p>
<p>Pause a virtual machine, if the VM is already paused, the function will return 0 directly for success. The function will return -1 if the target VM does not exist.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">vmid</span></code>: ID of the VM</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv217hcall_create_vcpuP2vm8uint64_t8uint64_t">
<span id="hcall_create_vcpu__vmP.uint64_t.uint64_t"></span><span class="target" id="group__acrn__hypercall_1gac2cd44d8475db820883f2b0bd2b671fd"></span>int64_t <code class="descname">hcall_create_vcpu</code><span class="sig-paren">(</span><em class="property">struct</em> vm *<em>vm</em>, uint64_t <em>vmid</em>, uint64_t <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv217hcall_create_vcpuP2vm8uint64_t8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>create vcpu </p>
<p>Create a vcpu based on parameter for a VM, it will allocate vcpu from freed physical cpus, if there is no available pcpu, the function will return -1.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">VM</span></code>: Pointer to VM data structure </li>
<li><code class="docutils literal"><span class="pre">vmid</span></code>: ID of the VM </li>
<li><code class="docutils literal"><span class="pre">param</span></code>: guest physical addressx. This gpa points to struct <a class="reference internal" href="#structacrn__create__vcpu"><span class="std std-ref">acrn_create_vcpu</span></a></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv220hcall_assert_irqlineP2vm8uint64_t8uint64_t">
<span id="hcall_assert_irqline__vmP.uint64_t.uint64_t"></span><span class="target" id="group__acrn__hypercall_1ga3b309f6aaeb38028bb31244c1793fb64"></span>int64_t <code class="descname">hcall_assert_irqline</code><span class="sig-paren">(</span><em class="property">struct</em> vm *<em>vm</em>, uint64_t <em>vmid</em>, uint64_t <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv220hcall_assert_irqlineP2vm8uint64_t8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>assert IRQ line </p>
<p>Assert a virtual IRQ line for a VM, which could be from ISA or IOAPIC, normally it will active a level IRQ. The function will return -1 if the target VM does not exist.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">VM</span></code>: Pointer to VM data structure </li>
<li><code class="docutils literal"><span class="pre">vmid</span></code>: ID of the VM </li>
<li><code class="docutils literal"><span class="pre">param</span></code>: guest physical address. This gpa points to struct <a class="reference internal" href="#structacrn__irqline"><span class="std std-ref">acrn_irqline</span></a></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv222hcall_deassert_irqlineP2vm8uint64_t8uint64_t">
<span id="hcall_deassert_irqline__vmP.uint64_t.uint64_t"></span><span class="target" id="group__acrn__hypercall_1gafc3a792b5139a5c4ead482d699820ac6"></span>int64_t <code class="descname">hcall_deassert_irqline</code><span class="sig-paren">(</span><em class="property">struct</em> vm *<em>vm</em>, uint64_t <em>vmid</em>, uint64_t <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv222hcall_deassert_irqlineP2vm8uint64_t8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>deassert IRQ line </p>
<p>Deassert a virtual IRQ line for a VM, which could be from ISA or IOAPIC, normally it will deactive a level IRQ. The function will return -1 if the target VM does not exist.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">VM</span></code>: Pointer to VM data structure </li>
<li><code class="docutils literal"><span class="pre">vmid</span></code>: ID of the VM </li>
<li><code class="docutils literal"><span class="pre">param</span></code>: guest physical address. This gpa points to struct <a class="reference internal" href="#structacrn__irqline"><span class="std std-ref">acrn_irqline</span></a></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv219hcall_pulse_irqlineP2vm8uint64_t8uint64_t">
<span id="hcall_pulse_irqline__vmP.uint64_t.uint64_t"></span><span class="target" id="group__acrn__hypercall_1gac24c98114b6ca7e5f78b7bdd20ec7e41"></span>int64_t <code class="descname">hcall_pulse_irqline</code><span class="sig-paren">(</span><em class="property">struct</em> vm *<em>vm</em>, uint64_t <em>vmid</em>, uint64_t <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv219hcall_pulse_irqlineP2vm8uint64_t8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>trigger a pulse on IRQ line </p>
<p>Trigger a pulse on a virtual IRQ line for a VM, which could be from ISA or IOAPIC, normally it triggers an edge IRQ. The function will return -1 if the target VM does not exist.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">VM</span></code>: Pointer to VM data structure </li>
<li><code class="docutils literal"><span class="pre">vmid</span></code>: ID of the VM </li>
<li><code class="docutils literal"><span class="pre">param</span></code>: guest physical address. This gpa points to struct <a class="reference internal" href="#structacrn__irqline"><span class="std std-ref">acrn_irqline</span></a></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv216hcall_inject_msiP2vm8uint64_t8uint64_t">
<span id="hcall_inject_msi__vmP.uint64_t.uint64_t"></span><span class="target" id="group__acrn__hypercall_1ga9c87151173130bdd81e8fc145bfaaa7f"></span>int64_t <code class="descname">hcall_inject_msi</code><span class="sig-paren">(</span><em class="property">struct</em> vm *<em>vm</em>, uint64_t <em>vmid</em>, uint64_t <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv216hcall_inject_msiP2vm8uint64_t8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>inject MSI interrupt </p>
<p>Inject a MSI interrupt for a VM. The function will return -1 if the target VM does not exist.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">VM</span></code>: Pointer to VM data structure </li>
<li><code class="docutils literal"><span class="pre">vmid</span></code>: ID of the VM </li>
<li><code class="docutils literal"><span class="pre">param</span></code>: guest physical address. This gpa points to struct <a class="reference internal" href="#structacrn__msi__entry"><span class="std std-ref">acrn_msi_entry</span></a></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv222hcall_set_ioreq_bufferP2vm8uint64_t8uint64_t">
<span id="hcall_set_ioreq_buffer__vmP.uint64_t.uint64_t"></span><span class="target" id="group__acrn__hypercall_1gaa31c6d58fdf2e03e21efd9a5bf0c962c"></span>int64_t <code class="descname">hcall_set_ioreq_buffer</code><span class="sig-paren">(</span><em class="property">struct</em> vm *<em>vm</em>, uint64_t <em>vmid</em>, uint64_t <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv222hcall_set_ioreq_bufferP2vm8uint64_t8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>set ioreq shared buffer </p>
<p>Set the ioreq share buffer for a VM. The function will return -1 if the target VM does not exist.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">VM</span></code>: Pointer to VM data structure </li>
<li><code class="docutils literal"><span class="pre">vmid</span></code>: ID of the VM </li>
<li><code class="docutils literal"><span class="pre">param</span></code>: guest physical address. This gpa points to struct <a class="reference internal" href="#structacrn__set__ioreq__buffer"><span class="std std-ref">acrn_set_ioreq_buffer</span></a></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv223hcall_notify_req_finish8uint64_t8uint64_t">
<span id="hcall_notify_req_finish__uint64_t.uint64_t"></span><span class="target" id="group__acrn__hypercall_1gaff743b010bb8f97fb0e2c3afce63b7d5"></span>int64_t <code class="descname">hcall_notify_req_finish</code><span class="sig-paren">(</span>uint64_t <em>vmid</em>, uint64_t <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv223hcall_notify_req_finish8uint64_t8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>notify request done </p>
<p>Notify the requestor VCPU for the completion of an ioreq. The function will return -1 if the target VM does not exist.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">vmid</span></code>: ID of the VM </li>
<li><code class="docutils literal"><span class="pre">param</span></code>: vcpu ID of the requestor</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv219hcall_set_vm_memmapP2vm8uint64_t8uint64_t">
<span id="hcall_set_vm_memmap__vmP.uint64_t.uint64_t"></span><span class="target" id="group__acrn__hypercall_1gaf5ed9c0d77ad474be0bf9b28f9c32c55"></span>int64_t <code class="descname">hcall_set_vm_memmap</code><span class="sig-paren">(</span><em class="property">struct</em> vm *<em>vm</em>, uint64_t <em>vmid</em>, uint64_t <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv219hcall_set_vm_memmapP2vm8uint64_t8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>setup ept memory mapping </p>
<p>Set the ept memory mapping for a VM. The function will return -1 if the target VM does not exist.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">VM</span></code>: Pointer to VM data structure </li>
<li><code class="docutils literal"><span class="pre">vmid</span></code>: ID of the VM </li>
<li><code class="docutils literal"><span class="pre">param</span></code>: guest physical address. This gpa points to struct <a class="reference internal" href="#structvm__set__memmap"><span class="std std-ref">vm_set_memmap</span></a></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv220hcall_remap_pci_msixP2vm8uint64_t8uint64_t">
<span id="hcall_remap_pci_msix__vmP.uint64_t.uint64_t"></span><span class="target" id="group__acrn__hypercall_1ga7c25fc70e9b37032ee5a24d533179a4a"></span>int64_t <code class="descname">hcall_remap_pci_msix</code><span class="sig-paren">(</span><em class="property">struct</em> vm *<em>vm</em>, uint64_t <em>vmid</em>, uint64_t <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv220hcall_remap_pci_msixP2vm8uint64_t8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>remap PCI MSI interrupt </p>
<p>Remap a PCI MSI interrupt from a VM’s virtual vector to native vector. The function will return -1 if the target VM does not exist.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">VM</span></code>: Pointer to VM data structure </li>
<li><code class="docutils literal"><span class="pre">vmid</span></code>: ID of the VM </li>
<li><code class="docutils literal"><span class="pre">param</span></code>: guest physical address. This gpa points to struct <a class="reference internal" href="#structacrn__vm__pci__msix__remap"><span class="std std-ref">acrn_vm_pci_msix_remap</span></a></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv216hcall_gpa_to_hpaP2vm8uint64_t8uint64_t">
<span id="hcall_gpa_to_hpa__vmP.uint64_t.uint64_t"></span><span class="target" id="group__acrn__hypercall_1gabaacef742ac3d8dd801d2a43e172c785"></span>int64_t <code class="descname">hcall_gpa_to_hpa</code><span class="sig-paren">(</span><em class="property">struct</em> vm *<em>vm</em>, uint64_t <em>vmid</em>, uint64_t <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv216hcall_gpa_to_hpaP2vm8uint64_t8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>translate guest physical address ot host physical address </p>
<p>Translate guest physical address to host physical address for a VM. The function will return -1 if the target VM does not exist.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">VM</span></code>: Pointer to VM data structure </li>
<li><code class="docutils literal"><span class="pre">vmid</span></code>: ID of the VM </li>
<li><code class="docutils literal"><span class="pre">param</span></code>: guest physical address. This gpa points to struct <a class="reference internal" href="#structvm__gpa2hpa"><span class="std std-ref">vm_gpa2hpa</span></a></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv218hcall_assign_ptdevP2vm8uint64_t8uint64_t">
<span id="hcall_assign_ptdev__vmP.uint64_t.uint64_t"></span><span class="target" id="group__acrn__hypercall_1ga259fe9d58e14072a59fc5adc439e86fd"></span>int64_t <code class="descname">hcall_assign_ptdev</code><span class="sig-paren">(</span><em class="property">struct</em> vm *<em>vm</em>, uint64_t <em>vmid</em>, uint64_t <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv218hcall_assign_ptdevP2vm8uint64_t8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Assign one passthrough dev to VM. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">VM</span></code>: Pointer to VM data structure </li>
<li><code class="docutils literal"><span class="pre">vmid</span></code>: ID of the VM </li>
<li><code class="docutils literal"><span class="pre">param</span></code>: guest physical address. This gpa points to physical BDF of the assigning ptdev</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv220hcall_deassign_ptdevP2vm8uint64_t8uint64_t">
<span id="hcall_deassign_ptdev__vmP.uint64_t.uint64_t"></span><span class="target" id="group__acrn__hypercall_1gad0594fb4a87524c3037f78ec08d8b218"></span>int64_t <code class="descname">hcall_deassign_ptdev</code><span class="sig-paren">(</span><em class="property">struct</em> vm *<em>vm</em>, uint64_t <em>vmid</em>, uint64_t <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv220hcall_deassign_ptdevP2vm8uint64_t8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Deassign one passthrough dev from VM. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">VM</span></code>: Pointer to VM data structure </li>
<li><code class="docutils literal"><span class="pre">vmid</span></code>: ID of the VM </li>
<li><code class="docutils literal"><span class="pre">param</span></code>: guest physical address. This gpa points to physical BDF of the deassigning ptdev</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv225hcall_set_ptdev_intr_infoP2vm8uint64_t8uint64_t">
<span id="hcall_set_ptdev_intr_info__vmP.uint64_t.uint64_t"></span><span class="target" id="group__acrn__hypercall_1gad4f2c396fa7506468b585e13966374c6"></span>int64_t <code class="descname">hcall_set_ptdev_intr_info</code><span class="sig-paren">(</span><em class="property">struct</em> vm *<em>vm</em>, uint64_t <em>vmid</em>, uint64_t <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv225hcall_set_ptdev_intr_infoP2vm8uint64_t8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set interrupt mapping info of ptdev. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">VM</span></code>: Pointer to VM data structure </li>
<li><code class="docutils literal"><span class="pre">vmid</span></code>: ID of the VM </li>
<li><code class="docutils literal"><span class="pre">param</span></code>: guest physical address. This gpa points to data structure of <a class="reference internal" href="#structhc__ptdev__irq"><span class="std std-ref">hc_ptdev_irq</span></a> including intr remapping info</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv227hcall_reset_ptdev_intr_infoP2vm8uint64_t8uint64_t">
<span id="hcall_reset_ptdev_intr_info__vmP.uint64_t.uint64_t"></span><span class="target" id="group__acrn__hypercall_1gac67d828207a74ded8c6312ab45501192"></span>int64_t <code class="descname">hcall_reset_ptdev_intr_info</code><span class="sig-paren">(</span><em class="property">struct</em> vm *<em>vm</em>, uint64_t <em>vmid</em>, uint64_t <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv227hcall_reset_ptdev_intr_infoP2vm8uint64_t8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Clear interrupt mapping info of ptdev. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">VM</span></code>: Pointer to VM data structure </li>
<li><code class="docutils literal"><span class="pre">vmid</span></code>: ID of the VM </li>
<li><code class="docutils literal"><span class="pre">param</span></code>: guest physical address. This gpa points to data structure of <a class="reference internal" href="#structhc__ptdev__irq"><span class="std std-ref">hc_ptdev_irq</span></a> including intr remapping info</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv216hcall_setup_sbufP2vm8uint64_t">
<span id="hcall_setup_sbuf__vmP.uint64_t"></span><span class="target" id="group__acrn__hypercall_1ga25a553434371eeb589429e67fd5fc250"></span>int64_t <code class="descname">hcall_setup_sbuf</code><span class="sig-paren">(</span><em class="property">struct</em> vm *<em>vm</em>, uint64_t <em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv216hcall_setup_sbufP2vm8uint64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Setup a share buffer for a VM. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>0 on success, non-zero on error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">VM</span></code>: Pointer to VM data structure </li>
<li><code class="docutils literal"><span class="pre">param</span></code>: guest physical address. This gpa points to struct <a class="reference internal" href="#structsbuf__setup__param"><span class="std std-ref">sbuf_setup_param</span></a></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<dl class="type">
<dt>
<span class="target" id="unionvhm__request_8reqs"></span><em class="property">union </em></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="member">
<dt>
<span class="target" id="unionvhm__request_8reqs_1a2d485a23d6989b7cc1c3c78c7f2a85ee"></span><code class="descname"></code></dt>
<dd></dd></dl>

<dl class="member">
<dt>
<span class="target" id="unionvhm__request_8reqs_1a99832193f87937bfd25a2d72619dcc6c"></span><code class="descname"></code></dt>
<dd></dd></dl>

<dl class="member">
<dt>
<span class="target" id="unionvhm__request_8reqs_1a055bfad48ed26e3b0897b4319c9a3e7d"></span><code class="descname"></code></dt>
<dd></dd></dl>

<dl class="member">
<dt>
<span class="target" id="unionvhm__request_8reqs_1aaefb45f89a6b7aa8dfbc2f0df8b66685"></span><code class="descname"></code></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="class">
<dt id="_CPPv214acrn_create_vm">
<span id="acrn_create_vm"></span><span class="target" id="structacrn__create__vm"></span><em class="property">struct </em><code class="descname">acrn_create_vm</code><a class="headerlink" href="#_CPPv214acrn_create_vm" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;acrn_common.h&gt;</em><p>Info to create a VM, the parameter for HC_CREATE_VM hypercall. </p>
</dd></dl>

<dl class="class">
<dt id="_CPPv216acrn_create_vcpu">
<span id="acrn_create_vcpu"></span><span class="target" id="structacrn__create__vcpu"></span><em class="property">struct </em><code class="descname">acrn_create_vcpu</code><a class="headerlink" href="#_CPPv216acrn_create_vcpu" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;acrn_common.h&gt;</em><p>Info to create a VCPU. </p>
<p>the parameter for HC_CREATE_VCPU hypercall </p>
</dd></dl>

<dl class="class">
<dt id="_CPPv221acrn_set_ioreq_buffer">
<span id="acrn_set_ioreq_buffer"></span><span class="target" id="structacrn__set__ioreq__buffer"></span><em class="property">struct </em><code class="descname">acrn_set_ioreq_buffer</code><a class="headerlink" href="#_CPPv221acrn_set_ioreq_buffer" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;acrn_common.h&gt;</em><p>Info to set ioreq buffer for a created VM. </p>
<p>the parameter for HC_SET_IOREQ_BUFFER hypercall </p>
</dd></dl>

<dl class="class">
<dt id="_CPPv212acrn_irqline">
<span id="acrn_irqline"></span><span class="target" id="structacrn__irqline"></span><em class="property">struct </em><code class="descname">acrn_irqline</code><a class="headerlink" href="#_CPPv212acrn_irqline" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;acrn_common.h&gt;</em><p>Info to assert/deassert/pulse a virtual IRQ line for a VM. </p>
<p>the parameter for HC_ASSERT_IRQLINE/HC_DEASSERT_IRQLINE/HC_PULSE_IRQLINE hypercall </p>
</dd></dl>

<dl class="class">
<dt id="_CPPv214acrn_msi_entry">
<span id="acrn_msi_entry"></span><span class="target" id="structacrn__msi__entry"></span><em class="property">struct </em><code class="descname">acrn_msi_entry</code><a class="headerlink" href="#_CPPv214acrn_msi_entry" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;acrn_common.h&gt;</em><p>Info to inject a MSI interrupt to VM. </p>
<p>the parameter for HC_INJECT_MSI hypercall </p>
</dd></dl>

<dl class="class">
<dt id="_CPPv214acrn_nmi_entry">
<span id="acrn_nmi_entry"></span><span class="target" id="structacrn__nmi__entry"></span><em class="property">struct </em><code class="descname">acrn_nmi_entry</code><a class="headerlink" href="#_CPPv214acrn_nmi_entry" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;acrn_common.h&gt;</em><p>Info to inject a NMI interrupt for a VM. </p>
</dd></dl>

<dl class="class">
<dt id="_CPPv222acrn_vm_pci_msix_remap">
<span id="acrn_vm_pci_msix_remap"></span><span class="target" id="structacrn__vm__pci__msix__remap"></span><em class="property">struct </em><code class="descname">acrn_vm_pci_msix_remap</code><a class="headerlink" href="#_CPPv222acrn_vm_pci_msix_remap" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;acrn_common.h&gt;</em><p>Info to remap pass-through PCI MSI for a VM. </p>
<p>the parameter for HC_VM_PCI_MSIX_REMAP hypercall </p>
</dd></dl>

<dl class="class">
<dt id="_CPPv213vm_set_memmap">
<span id="vm_set_memmap"></span><span class="target" id="structvm__set__memmap"></span><em class="property">struct </em><code class="descname">vm_set_memmap</code><a class="headerlink" href="#_CPPv213vm_set_memmap" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;acrn_hv_defs.h&gt;</em><p>Info to set ept mapping. </p>
<p>the parameter for HC_VM_SET_MEMMAP hypercall </p>
</dd></dl>

<dl class="class">
<dt id="_CPPv216sbuf_setup_param">
<span id="sbuf_setup_param"></span><span class="target" id="structsbuf__setup__param"></span><em class="property">struct </em><code class="descname">sbuf_setup_param</code><a class="headerlink" href="#_CPPv216sbuf_setup_param" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;acrn_hv_defs.h&gt;</em><p>Setup parameter for share buffer, used for HC_SETUP_SBUF hypercall </p>
</dd></dl>

<dl class="class">
<dt id="_CPPv210vm_gpa2hpa">
<span id="vm_gpa2hpa"></span><span class="target" id="structvm__gpa2hpa"></span><em class="property">struct </em><code class="descname">vm_gpa2hpa</code><a class="headerlink" href="#_CPPv210vm_gpa2hpa" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;acrn_hv_defs.h&gt;</em><p>Gpa to hpa translation parameter, used for HC_VM_GPA2HPA hypercall </p>
</dd></dl>

<dl class="class">
<dt id="_CPPv212hc_ptdev_irq">
<span id="hc_ptdev_irq"></span><span class="target" id="structhc__ptdev__irq"></span><em class="property">struct </em><code class="descname">hc_ptdev_irq</code><a class="headerlink" href="#_CPPv212hc_ptdev_irq" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;acrn_hv_defs.h&gt;</em><p>Intr mapping info per ptdev, the parameter for HC_SET_PTDEV_INTR_INFO hypercall </p>
</dd></dl>

<dl class="type">
<dt>
<span class="target" id="unionhc__ptdev__irq_8is"></span><em class="property">union </em></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="member">
<dt>
<span class="target" id="unionhc__ptdev__irq_8is_1a0acafcc8225cd779ddb9790b2e2a5f47"></span><code class="descname"></code></dt>
<dd><p>INTX remapping info </p>
</dd></dl>

<dl class="member">
<dt>
<span class="target" id="unionhc__ptdev__irq_8is_1a8fee7e6bee0292a2fa8265efcdaed482"></span><code class="descname"></code></dt>
<dd><p>MSIx remapping info </p>
</dd></dl>

</div>
</dd></dl>

<dl class="class">
<dt>
<span class="target" id="structhc__ptdev__irq_8is_8intx"></span><em class="property">struct </em></dt>
<dd><p>INTX remapping info </p>
</dd></dl>

<dl class="class">
<dt>
<span class="target" id="structhc__ptdev__irq_8is_8msix"></span><em class="property">struct </em></dt>
<dd><p>MSIx remapping info </p>
</dd></dl>

<dl class="class">
<dt id="_CPPv214hc_api_version">
<span id="hc_api_version"></span><span class="target" id="structhc__api__version"></span><em class="property">struct </em><code class="descname">hc_api_version</code><a class="headerlink" href="#_CPPv214hc_api_version" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;acrn_hv_defs.h&gt;</em><p>Hypervisor api version info, return it for HC_GET_API_VERSION hyercall </p>
</dd></dl>

</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="devicemodel_api.html" class="btn btn-neutral float-right" title="Device Model APIs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Project ACRN APIs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Project ACRN.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>